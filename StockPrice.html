<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function getSelect()
            {
                //create an object of class XMLHttpRequest to 
                //access a file at the server
                //since the file will access a database then
                //we choose to write it in PHP
                //But it depends on the browser
                if (window.XMLHttpRequest) var commAgent = new XMLHttpRequest();
                else var commAgent = new ActiveXObject("Microsoft.XMLHTTP"); //IE only

                //open communication with a server's PHP program
                commAgent.open("GET", "StockPrice.php", true);
                commAgent.send(null);

                //checking if the communication was done - depends on an
                //anonymous function
                commAgent.onreadystatechange = function(){
                    //checking handshakes and Http response
                    if (commAgent.readyState==4 && commAgent.status==200)
                    {
                        //take the response from the server's program
                        //and place it at the page's placeholder
                        document.getElementById("showselect").innerHTML = commAgent.responseText;
                    }
                }
            }//end of function getSelect()

            function showdistance()
            {
                //get the value of the selected option
                var selectOption = document.getElementById("countryList").value;

                //validation
                if (selectOption != "")
                {
                    //selectOption is a variable with elements separated by a comma
                    //country,capital,miles,km
                    //we want the individual elements
                    var country = selectOption.split(",")[0];
                    var capital = selectOption.split(",")[1];
                    var miles = selectOption.split(",")[2];
                    var km = selectOption.split(",")[3];

                    //now we display the final output at the placeholder showoutput
                    document.getElementById("showoutput").innerHTML = "The distance between NY and "+
                                    capital + ", " + country + " is " + miles + " miles or " + km +
                                    " Kilometers";
                }
                else clearoutput();
            }//end of function showdistance()

            function clearoutput()
            {
                document.getElementById("showoutput").innerHTML = "";
            }
        </script>
    </head>
    <body onload="getSelect()">
        <h2>Distance NY to World Capital</h2>
        <p></p>
        <!-- placeholder for the select element -->
         <div id="showselect">Here is the server's response</div>
         <p></p>
        <!-- placeholder for the final output -->
        <div id="showoutput">Here is the server's response</div> 
    </body>
</html>